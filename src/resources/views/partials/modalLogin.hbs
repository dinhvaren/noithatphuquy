<!-- Modal Login -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0">
                <h5 class="modal-title" id="loginModalLabel" style="color: #C19977;">Đăng Nhập</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <form action="/login" method="POST" id="loginForm">
                    <div class="mb-3">
                        <label for="email" class="form-label" style="color: #4b5563;">Email</label>
                        <input type="email" class="form-control" id="email" name="email"
                            placeholder="Nhập email của bạn" style="border-color: #e5e7eb;" required>
                        <div id="emailError"
                            style="display: none; color: #dc3545; font-size: 0.875rem; margin-top: 0.25rem;">
                            Email không tồn tại
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label" style="color: #4b5563;">Mật khẩu</label>
                        <input type="password" class="form-control" id="password" name="password"
                            placeholder="Nhập mật khẩu" style="border-color: #e5e7eb;" required>
                        <div id="passwordError"
                            style="display: none; color: #dc3545; font-size: 0.875rem; margin-top: 0.25rem;">
                            Mật khẩu không chính xác
                        </div>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="rememberMe" name="rememberMe"
                            style="background-color: #C19977; border-color: #C19977;">
                        <label class="form-check-label" for="rememberMe" style="color: #4b5563;">Ghi nhớ đăng
                            nhập</label>
                    </div>
                    <button type="submit" class="btn btn-primary w-100 mb-3"
                        style="background-color: #C19977; border-color: #C19977;">
                        Đăng Nhập
                    </button>
                    <div class="text-center">
                        <a href="#" class="text-decoration-none" style="color: #C19977;">Quên mật khẩu?</a>
                    </div>
                </form>
            </div>
            <div class="modal-footer justify-content-center border-0">
                <p class="mb-0" style="color: #4b5563;">Chưa có tài khoản?
                    <a href="#" id="openSignup" class="text-decoration-none" style="color: #C19977;">Đăng ký</a>
                </p>
            </div>
        </div>
    </div>
</div>

<style>
    .form-control:focus {
        border-color: #C19977;
        box-shadow: 0 0 0 0.25rem rgba(193, 153, 119, 0.25);
    }

    .btn-primary:hover {
        background-color: #b38a68;
        border-color: #b38a68;
    }

    .btn-primary:active {
        background-color: #9b7b5f !important;
        border-color: #9b7b5f !important;
    }

    .form-check-input:checked {
        background-color: #C19977;
        border-color: #C19977;
    }

    .form-check-input:focus {
        border-color: #C19977;
        box-shadow: 0 0 0 0.25rem rgba(193, 153, 119, 0.25);
    }

    #openSignup:hover {
        color: #b38a68 !important;
    }

    .modal-content {
        border: none;
        border-radius: 0.5rem;
    }

    .btn-close:focus {
        box-shadow: 0 0 0 0.25rem rgba(193, 153, 119, 0.25);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            const signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
            const loginForm = document.getElementById('loginForm');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const emailError = document.getElementById('emailError');
            const passwordError = document.getElementById('passwordError');

            // Xử lý submit form
            loginForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Reset error messages
                emailError.style.display = 'none';
                passwordError.style.display = 'none';
                emailInput.style.borderColor = '#e5e7eb';
                passwordInput.style.borderColor = '#e5e7eb';

                // Submit form
                this.submit();
            });


            // Xử lý chuyển đổi giữa modal đăng nhập và đăng ký
            document.getElementById('openSignup').addEventListener('click', function (e) {
                e.preventDefault();
                // Đóng modal đăng nhập
                loginModal.hide();
                // Đợi modal đóng rồi xóa backdrop
                setTimeout(() => {
                    document.querySelectorAll('.modal-backdrop').forEach(backdrop => backdrop.remove());
                }, 300);
                // Mở modal đăng ký
                signupModal.show();
            });
        });
</script>